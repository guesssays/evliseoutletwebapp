<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <title>EVLISE OUTLET ‚Äî –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã</title>
  <meta name="description" content="EVLISE OUTLET ‚Äî —Å—Ç–∏–ª—å–Ω–∞—è –∂–µ–Ω—Å–∫–∞—è –∏ –º—É–∂—Å–∫–∞—è –æ–¥–µ–∂–¥–∞ —Å–æ —Å–∫–∏–¥–∫–∞–º–∏. –ù–æ–≤–∏–Ω–∫–∏, –∞–∫—Ü–∏–∏ –∏ –±—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑ –ø—Ä—è–º–æ –≤ Telegram WebApp." />
  <meta name="theme-color" content="#121111" />
  <meta name="application-name" content="EVLISE OUTLET" />
  <meta name="apple-mobile-web-app-title" content="EVLISE OUTLET" />
  <meta name="format-detection" content="telephone=no" />

  <!-- –ê–Ω—Ç–∏-–∫—ç—à –¥–ª—è HTML -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Favicon / icons -->
  <link rel="icon" type="image/png" href="assets/favicon.png" />
  <link rel="apple-touch-icon" href="assets/images/apple-touch-icon.png" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="EVLISE OUTLET" />
  <meta property="og:title" content="EVLISE OUTLET ‚Äî –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã" />
  <meta property="og:description" content="–°—Ç–∏–ª—å–Ω—ã–µ –≤–µ—â–∏ –ø–æ Outlet-—Ü–µ–Ω–∞–º. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –∏ –∑–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤." />
  <meta property="og:locale" content="ru_RU" />
  <meta property="og:image" content="assets/images/og-evlise.png" />
  <meta property="og:image:alt" content="EVLISE OUTLET ‚Äî –±–∞–Ω–Ω–µ—Ä –º–∞–≥–∞–∑–∏–Ω–∞" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="EVLISE OUTLET ‚Äî –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã" />
  <meta name="twitter:description" content="–°—Ç–∏–ª—å–Ω—ã–µ –≤–µ—â–∏ –ø–æ Outlet-—Ü–µ–Ω–∞–º. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –∏ –∑–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤." />
  <meta name="twitter:image" content="assets/images/og-evlise.png" />

  <!-- Fonts / styles -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Encode+Sans:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* üåü –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –≤–∏–¥ —Ñ–∏–∫—Å-—Ö–µ–¥–µ—Ä–∞ —Ç–æ–≤–∞—Ä–∞ (—Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª, –±–µ–∑ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤) */
    .product-fixhdr{
      background:transparent !important;
      border:none !important;
      box-shadow:none !important;
      padding:0 !important;
      height:auto !important;
    }
    .product-fixhdr .fixbtn{
      background:transparent !important;
      border:none !important;
      box-shadow:none !important;
      color:inherit !important;
      /* —Ä–∞–∑–º–µ—Ä—ã –∑–∞–¥–∞—ë—Ç styles.css; –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º */
    }
    #btnFixFav.active .lucide-heart{ color:#ff4d5a; fill:currentColor; stroke:none; }

    /* ‚¨ÜÔ∏è Scroll-to-Top (–∫–Ω–æ–ø–∫–∞ ¬´–Ω–∞–≤–µ—Ä—Ö¬ª) */
    #scrollTopBtn{
      position:fixed; right:16px; bottom:calc(var(--tabbar-h) + var(--safe) + 16px);
      z-index:120; width:48px; height:48px; border-radius:14px;
      border:1px solid var(--stroke); background:#fff; box-shadow:var(--shadow);
    }
    #scrollTopBtn[hidden]{ display:none !important; }
  </style>

  <!-- Telegram WebApp -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Lucide (–ø–∏–Ω–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è) -->
  <script
    src="https://cdn.jsdelivr.net/npm/lucide@0.454.0/dist/umd/lucide.min.js"
    defer>
  </script>
</head>

<body>
  <div id="app">
    <!-- –°—Ç–∞—Ç–∏—á–Ω—ã–π —Ö–µ–¥–µ—Ä -->
    <header class="app-header" role="banner">
      <div class="hdr-left">
        <div class="brand">
          <span class="app-title" aria-label="EVLISE OUTLET">EVLISE OUTLET</span>
        </div>
      </div>
      <div class="hdr-right">
        <button
          id="openNotifications"
          class="icon-btn notif-btn"
          aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
          aria-live="polite"
          aria-atomic="true">
          <i data-lucide="bell"></i>
          <b id="notifBadge" class="badge" hidden>0</b>
        </button>
      </div>
    </header>

    <!-- –§–∏–∫—Å-—Ö–µ–¥–µ—Ä —Ç–æ–≤–∞—Ä–∞ -->
    <div id="productFixHdr" class="product-fixhdr" aria-hidden="true">
      <button id="btnFixBack" class="fixbtn" aria-label="–ù–∞–∑–∞–¥">
        <i data-lucide="arrow-left"></i>
      </button>
      <button id="btnFixFav" class="fixbtn" aria-label="–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ" aria-pressed="false">
        <i data-lucide="heart"></i>
      </button>
    </div>

    <!-- –ü–æ–∏—Å–∫ + —Ñ–∏–ª—å—Ç—Ä—ã -->
    <section class="section section-search">
      <div class="search-wrap">
        <i data-lucide="search" class="search-ico"></i>
        <input id="searchInput" class="search" placeholder="–ü–æ–∏—Å–∫ –æ–¥–µ–∂–¥—ã‚Ä¶" />
      </div>
      <button id="openFilters" class="square-btn" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã">
        <i data-lucide="sliders-horizontal"></i>
      </button>
    </section>

    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <section class="section">
      <div class="chipbar" id="catChips" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏"></div>
    </section>

    <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã -->
    <section class="section" id="activeFilters" aria-live="polite"></section>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <main id="view" class="view"></main>

    <!-- –ú–æ–¥–∞–ª–∫–∞ -->
    <div id="modal" class="modal" aria-hidden="true">
      <div class="modal-dialog" role="dialog" aria-modal="true">
        <div class="modal-head">
          <div id="modalTitle"></div>
          <button id="modalClose" class="icon-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å"><i data-lucide="x"></i></button>
        </div>
        <div id="modalBody" class="modal-body"></div>
        <div id="modalActions" class="modal-actions"></div>
      </div>
    </div>

    <div id="toastWrap" class="toast-wrap"></div>

    <!-- –ù–∏–∂–Ω–∏–π —Ç–∞–±–±–∞—Ä -->
    <nav class="tabbar" role="tablist" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
      <div class="tabbar-inner">
        <a href="#/" data-tab="home" class="tab active" role="tab" aria-selected="true">
          <i data-lucide="home"></i><span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#/favorites" data-tab="saved" class="tab" role="tab" aria-selected="false">
          <i data-lucide="heart"></i><span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
        </a>
        <a href="#/cart" data-tab="cart" class="tab badge-wrap" role="tab" aria-selected="false">
          <i data-lucide="shopping-bag"></i><span>–ö–æ—Ä–∑–∏–Ω–∞</span>
          <b id="cartBadge" class="badge" hidden></b>
        </a>
        <a href="#/account" data-tab="account" class="tab" role="tab" aria-selected="false">
          <i data-lucide="user-round"></i><span>–ê–∫–∫–∞—É–Ω—Ç</span>
        </a>
      </div>
    </nav>

    <!-- –ö–Ω–æ–ø–∫–∞ ¬´–≤–≤–µ—Ä—Ö¬ª -->
    <button id="scrollTopBtn" class="icon-btn" aria-label="–ù–∞–≤–µ—Ä—Ö" hidden>
      <i data-lucide="chevrons-up"></i>
    </button>

    <!-- –®–∞–±–ª–æ–Ω—ã -->
    <template id="product-card">
      <a class="card" href="#">
        <div class="card-img">
          <img loading="lazy" alt="">
          <button class="fav" aria-label="–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ" aria-pressed="false">
            <i data-lucide="heart"></i>
          </button>
        </div>
        <div class="card-body">
          <div class="title"></div>
          <div class="subtitle"></div>
          <div class="price-row">
            <div class="price"></div>
          </div>
        </div>
      </a>
    </template>

    <template id="filter-chip">
      <span class="chip chip-mini"></span>
    </template>
  </div>

  <!-- === ADMIN TOKEN INJECTION (works in Telegram WebApp only) === -->
  <script>
    (function () {
      // !!! –ó–ê–ú–ï–ù–ò –Ω–∞ —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ADMIN_API_TOKEN –∏–∑ Netlify !!!
      var ADMIN_TOKEN = 'UsA^5976JJbD4g6j*t^jkJMoMa%*Ho!j';

      // –ú–∏–Ω–∏-–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏: –æ—Ç–¥–∞—ë–º —Ç–æ–∫–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Telegram WebApp
      var h = (document.referrer || '').toLowerCase();
      var ua = (navigator.userAgent || '').toLowerCase();
      var isTgRef = h.startsWith('https://t.me') ||
                    h.startsWith('https://web.telegram.org') ||
                    h.startsWith('https://telegram.org');
      var isTgUA  = ua.indexOf('telegram') !== -1;

      // –¢–∞–∫–∂–µ —Å—á–∏—Ç–∞–µ–º –≤–∞–ª–∏–¥–Ω—ã–º, –µ—Å–ª–∏ –µ—Å—Ç—å initData (–º–∏–Ω–∏-–∞–ø–ø —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–∫—Ä—ã—Ç)
      var hasInitData = (function () {
        try { return typeof window.Telegram?.WebApp?.initData === 'string' && window.Telegram.WebApp.initData.length > 0; }
        catch { return false; }
      })();

      if ((isTgRef || isTgUA || hasInitData) && ADMIN_TOKEN) {
        window.__ADMIN_API_TOKEN__ = ADMIN_TOKEN;
        try { localStorage.setItem('admin_api_token', String(ADMIN_TOKEN)); } catch {}
      }

      // –†–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ ?admintoken=...
      try {
        var p = new URLSearchParams(location.search);
        var q = p.get('admintoken');
        if (q) {
          window.__ADMIN_API_TOKEN__ = q;
          localStorage.setItem('admin_api_token', q);
          p.delete('admintoken');
          history.replaceState({}, '', location.pathname + (p.toString() ? '?' + p.toString() : '') + location.hash);
        }
      } catch {}
    })();
  </script>

  <!-- –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å (–±–µ–∑ ?v ‚Äî –∫—ç—à –æ—Ç–∫–ª—é—á—ë–Ω _headers‚Äô–æ–º) -->
  <script type="module" src="src/main.js"></script>

  <!-- –ò–∫–æ–Ω–∫–∏ –ø–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–∑–∞–ø–∞—Å–Ω–æ–π –≤—ã–∑–æ–≤) -->
  <script>
    try { window.lucide?.createIcons?.(); } catch {}
  </script>

  <!-- –õ–æ–∫–∞–ª—å–Ω—ã–π JS –¥–ª—è –∫–Ω–æ–ø–∫–∏ ¬´–≤–≤–µ—Ä—Ö¬ª (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥—É–ª–µ–π) -->
  <script>
    (function(){
      const btn = document.getElementById('scrollTopBtn');
      if(!btn) return;
      function onScroll(){
        const sc = Math.max(document.documentElement.scrollTop || 0, window.scrollY || 0);
        btn.hidden = sc < 280;
      }
      window.addEventListener('scroll', onScroll, {passive:true});
      onScroll();
      btn.addEventListener('click', ()=> window.scrollTo({ top:0, behavior:'smooth' }));
      try{ window.lucide?.createIcons?.(); }catch{}
    })();
  </script>
</body>
</html>
